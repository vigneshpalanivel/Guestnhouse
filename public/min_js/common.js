function homeAutocomplete(){document.getElementById("location")&&(home_autocomplete=new google.maps.places.Autocomplete(document.getElementById("location")),home_autocomplete.addListener("place_changed",trigger_checkin)),document.getElementById("mob-search-location")&&(home_mob_autocomplete=new google.maps.places.Autocomplete(document.getElementById("mob-search-location")),google.maps.event.addListener(home_mob_autocomplete,"place_changed",function(){var e=$("#mob-search-location").val(),a=e.replace(" ","+");window.location.href=APP_URL+"/s?location="+a}))}function headerAutocomplete(){document.getElementById("header-search-form")&&(header_autocomplete=new google.maps.places.Autocomplete(document.getElementById("header-search-form")),google.maps.event.addListener(header_autocomplete,"place_changed",function(){$("#header-search-settings").addClass("shown"),$("#header-search-checkin").trigger("click"),$(".webcot-lg-datepicker button").trigger("click")})),document.getElementById("header-search-form-mob")&&(sm_autocomplete=new google.maps.places.Autocomplete(document.getElementById("header-search-form-mob")),google.maps.event.addListener(sm_autocomplete,"place_changed",function(){$("#header-search-form").val($("#header-search-form-mob").val()),$("#modal_checkin").trigger("click")}))}function trigger_checkin(){$("#checkin").datepicker("show")}$("#home_slider").responsiveSlides({auto:!0,pager:!1,nav:!1,speed:2e3,namespace:"home_slider",timeout:8e3}),$(document).mouseup(function(e){var a=$(".header-dropdown");a.is(e.target)||0!==a.has(e.target).length||a.hide()}),$("ul.menu-group li a").click(function(){$(".nav--sm").css("visibility","hidden")}),$(function(){$("#my-element").textfill({maxFontPixels:36})}),$(window).scroll(function(){$(window).width()>760&&"block"==$("#ui-datepicker-div").css("display")&&$("#ui-datepicker-div").hide()}),$(".modal-content").scroll(function(){$("#ui-datepicker-div").hide()}),$(".contact-modal").scroll(function(){$("#ui-datepicker-div").hide()}),$(".checkin").click(function(){}),$(".checkout").click(function(){}),$("#host-profile-contact-btn").click(function(){$("body").addClass("pos-fix")}),$(".modal-close").click(function(){$("body").removeClass("pos-fix"),$("#ui-datepicker-div").hide()}),$("#accept_submit").attr("disabled","disabled"),$(document).ready(function(){$(document).on("click","#tos_confirm",function(){0==$("#tos_confirm").val()?($("#accept_submit").removeAttr("disabled"),$("#tos_confirm").val("1")):($("#accept_submit").attr("disabled","disabled"),$("#tos_confirm").val("0"))}),$(document).on("click","#pre_approve_button",function(){$("div").remove(".alert-success")})}),$(function(){var e=$("[rel~=tooltip]"),a=!1,t=!1;e.bind("mouseenter",function(){if(a=$(this),tip=a.attr("title"),t=$('<div id="tooltip1"></div>'),!tip||""==tip)return!1;a.removeAttr("title"),t.css("opacity",0).html(tip).appendTo("body");var e=function(){$(window).width()<1.5*t.outerWidth()?t.css("max-width",$(window).width()/2):t.css("max-width",340);var e=a.offset().left+a.outerWidth()/2-t.outerWidth()/2,o=a.offset().top-t.outerHeight()-20;if(e<0?(e=a.offset().left+a.outerWidth()/2-20,t.addClass("left")):t.removeClass("left"),e+t.outerWidth()>$(window).width()?(e=a.offset().left-t.outerWidth()+a.outerWidth()/2+20,t.addClass("right")):t.removeClass("right"),o<0){var o=a.offset().top+a.outerHeight();t.addClass("top")}else t.removeClass("top");t.css({left:e,top:o}).animate({top:"+=10",opacity:1},50)};e(),$(window).resize(e);var o=function(){t.animate({top:"-=10",opacity:0},50,function(){$(this).remove()}),a.attr("title",tip)};a.bind("mouseleave",o),t.bind("click",o)})}),$(".host_banner_content_slider_item").hide(),$("#host_banner_content_slider_item_0").show(),$("#host_banner_slider").responsiveSlides({auto:!0,pager:!1,nav:!1,speed:2e3,timeout:5e3,namespace:"host_banner_slider_item",before:function(e){items_count=$("#host_banners_count").val(),current_index=$("."+this.namespace+"2_on").index(),next_index=current_index+1,next_index>items_count&&(next_index=0),$("#host_banner_content_slider_item_"+current_index).hide(),$("#host_banner_content_slider_item_"+next_index).fadeIn(1e3)}}),$(function(){$("#bottom_slider").responsiveSlides({auto:!0,pager:!1,nav:!0})}),$("#bottom_slider").responsiveSlides({auto:!0,speed:500,timeout:4e3,pager:!1,nav:!0,random:!1,pause:!1,pauseControls:!0,prevText:"Previous",nextText:"Next",maxwidth:"",navContainer:"",manualControls:"",namespace:"bottom_slider",before:function(){},after:function(){}}),$(".manage-listing-row-container").hasClass("has-collapsed-nav")===!0&&$("#js-manage-listing-nav").addClass("manage-listing-nav"),$(".js-show-how-it-works").click(function(){$(".js-how-it-works").slideToggle("fast",function(){$(".js-how-it-works").show()})}),$(".js-close-how-it-works").click(function(){$(".js-how-it-works").slideToggle("fast",function(){$(".js-how-it-works").hide()})}),$("#room-type-tooltip").mouseover(function(){$(".tooltip-room").show()}),$("#room-type-tooltip").mouseout(function(){$(".tooltip-room").hide()}),$('[id^="amenity-tooltip"]').on("mouseover",function(){var e=$(this).data("id");$("#ame-tooltip-"+e).show()}),$('[id^="amenity-tooltip"]').on("mouseout",function(){$('[id^="ame-tooltip"]').hide()}),$(".tool-amenity1").mouseover(function(){$(".tooltip-amenity1").show()}),$(".tool-amenity1").mouseout(function(){$(".tooltip-amenity1").hide()}),$(".tool-amenity2").mouseover(function(){$(".tooltip-amenity2").show()}),$(".tool-amenity2").mouseout(function(){$(".tooltip-amenity2").hide()}),$("a.become").mouseover(function(){$(".drop-down-menu-host").show()}),$("a.become").mouseout(function(){$(".drop-down-menu-host").hide()}),$(".trip-drop").mouseout(function(){$(".drop-down-menu-trip").hide()}),$(".trip-drop").mouseover(function(){$(".drop-down-menu-trip").show()}),$(".inbox-icon").mouseout(function(){$(".drop-down-menu-msg").hide()}),$(".inbox-icon").mouseover(function(){$(".drop-down-menu-msg").show()}),$(".drop-down-menu-host").mouseover(function(){$(this).show()}),$(".drop-down-menu-host").mouseout(function(){$(this).hide()}),$(".drop-down-menu-trip").mouseover(function(){$(this).show()}),$(".drop-down-menu-trip").mouseout(function(){$(this).hide()}),$(".drop-down-menu-msg").mouseover(function(){$(this).show()}),$(".drop-down-menu-msg").mouseout(function(){$(this).hide()}),$(".burger--sm").click(function(){$(".header--sm .nav--sm").css("visibility","visible"),$("body").addClass("remove-pos-fix pos-fix"),$(".makent-header .header--sm .nav-content--sm").addClass("right-content")}),$(".nav-mask--sm").click(function(){$(".header--sm .nav--sm").css("visibility","hidden"),$("body").removeClass("remove-pos-fix pos-fix"),$(".makent-header .header--sm .nav-content--sm").removeClass("right-content")}),$(".search-modal-trigger, #sm-search-field").click(function(){$("#search-modal--sm").removeClass("hide"),$("#search-modal--sm").attr("aria-hidden","false")}),$(".search-modal-container .modal-close").click(function(){$("#search-modal--sm").addClass("hide"),$("#search-modal--sm").attr("aria-hidden","true")}),$(".list-nav-link a").click(function(){$(".listing-nav-sm").removeClass("collapsed")}),$("#href_pricing").click(function(){$("#js-manage-listing-nav").removeClass("manage-listing-nav"),$("#js-manage-listing-nav").addClass("pos-abs"),$("#ajax_container").addClass("mar-left-cont")}),$("#href_terms").click(function(){$("#js-manage-listing-nav").removeClass("manage-listing-nav"),$("#js-manage-listing-nav").addClass("pos-abs"),$("#ajax_container").addClass("mar-left-cont")}),$("#remove-manage").click(function(){$("#js-manage-listing-nav").removeClass("manage-listing-nav"),$("#js-manage-listing-nav").addClass("pos-abs"),$("#ajax_container").addClass("mar-left-cont")}),$("#href_booking").click(function(){$("#js-manage-listing-nav").removeClass("manage-listing-nav"),$("#js-manage-listing-nav").addClass("pos-abs"),$("#ajax_container").addClass("mar-left-cont")}),$("#href_basics").click(function(){$("#js-manage-listing-nav").removeClass("manage-listing-nav"),$("#js-manage-listing-nav").addClass("pos-abs"),$("#ajax_container").addClass("mar-left-cont")}),$("#href_description").click(function(){$("#js-manage-listing-nav").removeClass("manage-listing-nav"),$("#js-manage-listing-nav").addClass("pos-abs"),$("#ajax_container").addClass("mar-left-cont")}),$("#href_location").click(function(){$("#js-manage-listing-nav").removeClass("manage-listing-nav"),$("#js-manage-listing-nav").addClass("pos-abs"),$("#ajax_container").addClass("mar-left-cont")}),$("#href_amenities").click(function(){$("#js-manage-listing-nav").removeClass("manage-listing-nav"),$("#js-manage-listing-nav").addClass("pos-abs"),$("#ajax_container").addClass("mar-left-cont")}),$("#href_photos").click(function(){$("#js-manage-listing-nav").removeClass("manage-listing-nav"),$("#js-manage-listing-nav").addClass("pos-abs"),$("#ajax_container").addClass("mar-left-cont")}),$("#href_details").click(function(){$("#js-manage-listing-nav").removeClass("manage-listing-nav"),$("#js-manage-listing-nav").addClass("pos-abs"),$("#ajax_container").addClass("mar-left-cont")}),$("#href_guidebook").click(function(){$("#js-manage-listing-nav").removeClass("manage-listing-nav"),$("#js-manage-listing-nav").addClass("pos-abs"),$("#ajax_container").addClass("mar-left-cont")}),$("#href_calendar").click(function(){$("#js-manage-listing-nav").addClass("manage-listing-nav")}),$("#href_calendar").click(function(){$("#ajax_container").removeClass("mar-left-cont")}),$("#href_calendar").click(function(){$("#js-manage-listing-nav").removeClass("pos-abs")}),$("#header-avatar-trigger").click(function(e){e.preventDefault(),$(".tooltip.tooltip-top-right.dropdown-menu.drop-down-menu-login").toggle()}),"undefined"==typeof google&&(window.location.href=APP_URL+"/in_secure"),homeAutocomplete();var home_autocomplete,home_mob_autocomplete,current_url=window.location.href.split("?")[0],last_part=current_url.substr(current_url.lastIndexOf("/")),last_part1=current_url.substr(current_url.lastIndexOf("/")+1);"/s"!=last_part?headerAutocomplete():$("#header-search-form-mob").keypress(function(e){13===e.keyCode&&e.preventDefault()});var header_autocomplete,sm_autocomplete;start=moment(),$("#header-search-checkin").daterangepicker({minDate:start,dateLimitMin:{days:1},autoApply:!0,autoUpdateInput:!1,locale:{format:"MMM DD"}}),$("#header-search-checkin").on("apply.daterangepicker",function(e,a){startDateInput=$("#header-search-checkin"),endDateInput=$("#header-search-checkout"),startDate=a.startDate,endDate=a.endDate,startDateInput.val(startDate.format("DD-MM-YYYY")),endDateInput.val(endDate.format("DD-MM-YYYY"))}),$("#header-search-checkout").daterangepicker({minDate:start,dateLimitMin:{days:1},autoApply:!0,autoUpdateInput:!1,locale:{format:"MMM DD"}}),$("#header-search-checkout").on("apply.daterangepicker",function(e,a){startDateInput=$("#header-search-checkin"),endDateInput=$("#header-search-checkout"),startDate=a.startDate,endDate=a.endDate,startDateInput.val(startDate.format("DD-MM-YYYY")),endDateInput.val(endDate.format("DD-MM-YYYY"))}),start=moment(),$("#modal_checkin").daterangepicker({minDate:start,dateLimitMin:{days:1},autoApply:!0,autoUpdateInput:!1,locale:{format:"MMM DD"}}),$("#modal_checkin").on("apply.daterangepicker",function(e,a){startDateInput=$("#modal_checkin"),endDateInput=$("#modal_checkout"),startDate=a.startDate,endDate=a.endDate,startDateInput.val(startDate.format("DD-MM-YYYY")),endDateInput.val(endDate.format("DD-MM-YYYY"))}),$("#modal_checkout").daterangepicker({minDate:start,dateLimitMin:{days:1},autoApply:!0,autoUpdateInput:!1,locale:{format:"MMM DD"}}),$("#modal_checkout").on("apply.daterangepicker",function(e,a){startDateInput=$("#modal_checkin"),endDateInput=$("#modal_checkout"),startDate=a.startDate,endDate=a.endDate,startDateInput.val(startDate.format("DD-MM-YYYY")),endDateInput.val(endDate.format("DD-MM-YYYY"))}),$("#searchbar-form").submit(function(e){""==$("#location").val()?($(".searchbar__location-error").removeClass("hide"),e.preventDefault()):$(".searchbar__location-error").addClass("hide")}),$("#location, #header-location--sm").keyup(function(){$(".searchbar__location-error").addClass("hide")}),$(".search-form").submit(function(e){var a=$("#header-search-checkin").val(),t=$("#header-search-checkout").val(),o=$("#header-search-guests").val(),n="";$('[id^="header_room_type"]').each(function(){$(this).is(":checked")&&(n+=$(this).val()+",")}),n=n.slice(0,-1);var i=$("#header-search-form").val(),s=i.replace(" ","+");window.location.href=APP_URL+"/s?location="+s+"&checkin="+a+"&checkout="+t+"&guests="+o+"&room_type="+n,e.preventDefault()}),$("#search-form--sm-btn").click(function(e){var a=$("#header-search-form-mob").val();if(""==a)return $(".searchbar__location-error").removeClass("hide"),!1;$(".searchbar__location-error").addClass("hide");var t=$("#modal_checkin").val(),o=$("#modal_checkout").val(),n=$("#modal_guests").val(),i="";$('[id^="room-type-"]').each(function(){$(this).is(":checked")&&(i+=$(this).val()+",")}),i=i.slice(0,-1);var s=a.replace(" ","+");window.location.href=APP_URL+"/s?location="+s+"&checkin="+t+"&checkout="+o+"&guests="+n+"&room_type="+i,e.preventDefault()}),$("html").click(function(){$("#header-search-settings").removeClass("shown")}),$(document).on("click",".menu-item",function(){var e=$(this).attr("href");"#"==e&&$("body").removeClass("pos-fix")}),$("#header-search-settings").click(function(e){e.stopPropagation()}),$("#ui-datepicker-div").click(function(e){e.stopPropagation()}),$(".daterangepicker").click(function(e){e.stopPropagation()}),$(".searchbar").length&&(start=moment(),$("#checkin").daterangepicker({minDate:start,dateLimitMin:{days:1},autoApply:!0,autoUpdateInput:!1,locale:{format:"MMM DD"}}),$("#checkin").on("apply.daterangepicker",function(e,a){startDateInput=$("#checkin"),endDateInput=$("#checkout"),startDate=a.startDate,endDate=a.endDate,startDateInput.val(startDate.format("DD-MM-YYYY")),endDateInput.val(endDate.format("DD-MM-YYYY"))}),$("#checkout").daterangepicker({minDate:start,dateLimitMin:{days:1},autoApply:!0,autoUpdateInput:!1,locale:{format:"MMM DD"}})),app.controller("payment",["$scope","$http",function(e,a){$(".open-coupon-section-link").click(function(){$("#billing-table").addClass("coupon-section-open"),$("#restric_apply").hide()}),$(".cancel-coupon").click(function(){$("#billing-table").removeClass("coupon-section-open"),$("#restric_apply").show(),$("#coupon_disabled_message").hide()}),$("#apply-coupon").click(function(){var e=$(".coupon-code-field").val(),t=$("input[name=session_key]").val();a.post(APP_URL+"/payments/apply_coupon",{coupon_code:e,s_key:t}).then(function(e){e.data.message?($("#coupon_disabled_message").show(),$("#coupon_disabled_message").text(e.data.message),$("#after_apply_remove").hide()):($("#coupon_disabled_message").hide(),$("#restric_apply").hide(),$("#after_apply").hide(),$("#after_apply_remove").show(),$("#after_apply_coupon").show(),$("#after_apply_amount").show(),$("#applied_coupen_amount").text(e.data.coupon_amount),$("#payment_total").text(e.data.coupen_applied_total),window.location.reload())})}),$("#remove_coupon").click(function(){a.post(APP_URL+"/payments/remove_coupon",{}).then(function(e){window.location.reload()})})}]),$(document).on("change","#payment-method-select",function(){"paypal"==$(this).val()?($("#payment-method-cc").hide(),$(".cc").hide(),$("."+$(this).val()).addClass("active"),$("."+$(this).val()).addClass("active"),$("."+$(this).val()+" > .payment-logo").removeClass("inactive")):($("#payment-method-cc").show(),$(".cc").show(),$(".paypal").removeClass("active"),$(".paypal > .payment-logo").addClass("inactive")),$('[name="payment_method"]').val($(this).val())}),$(document).ready(function(){setTimeout(function(){"paypal"==$("#payment-method-select").val()?($("#payment-method-cc").hide(),$(".cc").hide(),$("."+$("#payment-method-select").val()).addClass("active"),$("."+$("#payment-method-select").val()).addClass("active"),$("."+$("#payment-method-select").val()+" > .payment-logo").removeClass("inactive")):($("#payment-method-cc").show(),$(".cc").show(),$(".paypal").removeClass("active"),$(".paypal > .payment-logo").addClass("inactive")),$('[name="payment_method"]').val($("#payment-method-select").val())},1e3)}),$("#country-select").change(function(){$("#billing-country").text($("#country-select option:selected").text()),$('[name="country"]').val($(this).val())}),$("#billing-country").text($("#country-select option:selected").text()),$('[name="country"]').val($("#country-select option:selected").val());var previous_currency;app.controller("footer",["$scope","$http",function(e,a){$("#currency_footer").click(function(){previous_currency=this.value}).change(function(){a.post(APP_URL+"/set_session",{currency:$(this).val(),previous_currency:previous_currency}).then(function(e){location.reload()})}),$("#language_footer").change(function(){a.post(APP_URL+"/set_session",{language:$(this).val()}).then(function(e){location.reload()})}),$(".room_status_dropdown").change(function(){var e={};e.status=$(this).val();var t=JSON.stringify(e),o=$(this).attr("data-room-id");a.post("manage-listing/"+o+"/update_rooms",{data:t}).then(function(a){"Unlisted"==e.status?($('[data-room-id="div_'+o+'"] > i').addClass("dot-danger"),$('[data-room-id="div_'+o+'"] > i').removeClass("dot-success")):"Listed"==e.status&&($('[data-room-id="div_'+o+'"] > i').removeClass("dot-danger"),$('[data-room-id="div_'+o+'"] > i').addClass("dot-success"))})}),$(document).on("click",".wl-modal-footer__text",function(){$(".wl-modal-footer__form").removeClass("hide")}),$("#send-email").unbind("click").click(function(){var e=$("#email-list").val();""!=e&&a.post("invite/share_email",{emails:e}).then(function(e){"true"==e.data?($("#success_message").fadeIn(800),$("#success_message").fadeOut(),$("#email-list").val("")):($("#error_message").fadeIn(800),$("#error_message").fadeOut())})})}]),app.controller("payout_preferences",["$scope","$http",function(e,a){$("#add-payout-method-button").click(function(){$("#payout_popup1").removeClass("hide").attr("aria-hidden","false")}),$("#address").submit(function(){var e='<div class="alert alert-error alert-error alert-header"><a class="close alert-close" href="javascript:void(0);"></a><i class="icon alert-icon icon-alert-alt"></i>';return""==$("#payout_info_payout_address1").val().trim()?($("#popup1_flash-container").html(e+$("#blank_address").val()+"</div>"),!1):""==$("#payout_info_payout_city").val().trim()?($("#popup1_flash-container").html(e+$("#blank_city").val()+"</div>"),!1):""==$("#payout_info_payout_zip").val().trim()?($("#popup1_flash-container").html(e+$("#blank_post").val()+"</div>"),!1):null==$("#payout_info_payout_country").val().trim()?($("#popup1_flash-container").html(e+$("#blank_country").val()+"</div>"),!1):($("#payout_info_payout2_address1").val($("#payout_info_payout_address1").val()),$("#payout_info_payout2_address2").val($("#payout_info_payout_address2").val()),$("#payout_info_payout2_city").val($("#payout_info_payout_city").val()),$("#payout_info_payout2_state").val($("#payout_info_payout_state").val()),$("#payout_info_payout2_zip").val($("#payout_info_payout_zip").val()),$("#payout_info_payout2_country").val($("#payout_info_payout_country").val()),$("#payout_popup1").addClass("hide"),void $("#payout_popup2").removeClass("hide").attr("aria-hidden","false"))}),$("#select-payout-method-submit").click(function(){var e='<div class="alert alert-error alert-error alert-header"><a class="close alert-close" href="javascript:void(0);"></a><i class="icon alert-icon icon-alert-alt"></i>';return void 0==$('[id="payout2_method"]:checked').val()?($("#popup2_flash-container").html(e+$("#choose_method").val()+"</div>"),!1):($("#payout_info_payout3_address1").val($("#payout_info_payout2_address1").val()),$("#payout_info_payout3_address2").val($("#payout_info_payout2_address2").val()),$("#payout_info_payout3_city").val($("#payout_info_payout2_city").val()),$("#payout_info_payout3_state").val($("#payout_info_payout2_state").val()),$("#payout_info_payout3_zip").val($("#payout_info_payout2_zip").val()),$("#payout_info_payout3_country").val($("#payout_info_payout2_country").val()),$("#payout3_method").val($("#payout2_method").val()),$("#payout_popup2").addClass("hide"),void $("#payout_popup3").removeClass("hide").attr("aria-hidden","false"))}),$("#payout_paypal").submit(function(){var e=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;return!!e.test($("#paypal_email").val())||($("#popup3_flash-container").removeClass("hide"),!1)}),$(".panel-close").click(function(){$(this).parent().parent().parent().parent().parent().addClass("hide")}),$('[id$="_flash-container"]').on("click",".alert-close",function(){$(this).parent().parent().html("")})}]),app.directive("postsPaginationTransaction",function(){return{restrict:"E",template:'<ul class="pagination"><h3 class="status-text text-center" ng-show="loading">Loading...</h3><h3 class="status-text text-center" ng-hide="result.length">No Transactions</h3><li ng-show="currentPage != 1"><a href="javascript:void(0)" ng-click="pagination_result(type, 1)">&laquo;</a></li><li ng-show="currentPage != 1"><a href="javascript:void(0)" ng-click="pagination_result(type, currentPage-1)">&lsaquo; '+$("#pagin_prev").val()+' </a></li><li ng-repeat="i in range" ng-class="{active : currentPage == i}"><a href="javascript:void(0)" ng-click="pagination_result(type, i)">{{i}}</a></li><li ng-show="currentPage != totalPages"><a href="javascript:void(0)" ng-click="pagination_result(type, currentPage+1)">'+$("#pagin_next").val()+' &rsaquo;</a></li><li ng-show="currentPage != totalPages"><a href="javascript:void(0)" ng-click="pagination_result(type, totalPages)">&raquo;</a></li></ul>'}}).controller("transaction_history",["$scope","$http",function(e,a){e.paid_out=0,$("li > .tab-item").click(function(){var a=$(this).attr("aria-controls"),t=$(this).attr("aria-selected");"false"==t&&($(".tab-item").attr("aria-selected","false"),$(this).attr("aria-selected","true"),$(".tab-panel").hide(),$("#"+a).show()),e.type=a,e.pagination_result(a,1)}),$('[class^="payout-"]').change(function(){var a=$(this).parent().parent().parent().parent().attr("id");e.type=a,e.pagination_result(a,1)}),e.pagination_result=function(t,o){var n={};n.type=t,n.payout_method=$("#"+n.type+" .payout-method").val(),n.listing=$("#"+n.type+" .payout-listing").val(),n.year=$("#"+n.type+" .payout-year").val(),n.start_month=$("#"+n.type+" .payout-start-month").val(),n.end_month=$("#"+n.type+" .payout-end-month").val();var i=JSON.stringify(n);void 0==o&&(o=1),"completed-transactions"==t&&(e.completed_csv_param="type="+n.type+"&payout_method="+n.payout_method+"&listing="+n.listing+"&year="+n.year+"&start_month="+n.start_month+"&end_month="+n.end_month+"&page="+o),"future-transactions"==t&&(e.future_csv_param="type="+n.type+"&payout_method="+n.payout_method+"&listing="+n.listing+"&page="+o),e.result_show=!1,e.loading=!0,a.post(APP_URL+"/users/result_transaction_history?page="+o,{data:i}).then(function(a){if(e.loading=!1,e.result=a.data.data,0!=e.result.length){e.result_show=!0,e.totalPages=a.data.last_page,e.currentPage=a.data.current_page,e.type=t;for(var o=[],n=1;n<=a.data.last_page;n++)o.push(n);e.range=o;for(var i=0,n=0;n<e.result.length;n++)i+=e.result[n].amount;e.paid_out=e.result[0].currency_symbol+i}})},e.pagination_result("completed-transactions",1)}]),app.controller("reviews",["$scope","$http",function(e,a){$("li > .tab-item").click(function(){var e=$(this).attr("aria-controls"),a=$(this).attr("aria-selected");"false"==a&&($(".tab-item").attr("aria-selected","false"),$(this).attr("aria-selected","true"),$(".tab-panel").hide(),$("#"+e).show())})}]),app.controller("help",["$scope","$http",function(e,a){$(".navtree-list .navtree-next").click(function(){var e=$(this).data("id"),a=$(this).data("name");$("#navtree").css({left:"-300px"}),$(".subnav-list li:first-child a").attr("aria-selected","false"),$(".subnav-list li").append('<li> <a class="subnav-item" href="#" data-node-id="0" aria-selected="true"> '+a+" </a> </li>"),$("#navtree-"+e).css({display:"block"})}),$(".navtree-list .navtree-back").click(function(){var e=$(this).data("id");$(this).data("name");$("#navtree").css({left:"0px"}),$(".subnav-list li:first-child a").attr("aria-selected","true"),$(".subnav-list li").last().remove(),$("#navtree-"+e).css({display:"none"})}),$("#help_search").autocomplete({source:function(e,a){$.ajax({url:APP_URL+"/ajax_help_search",type:"GET",dataType:"json",data:{term:e.term},success:function(e){a(e),$(this).removeClass("ui-autocomplete-loading")}})},search:function(){$(this).addClass("loading")},open:function(){$(this).removeClass("loading")}}).autocomplete("instance")._renderItem=function(e,a){return 0!=a.id?($("#help_search").removeClass("ui-autocomplete-loading"),$("<li>").append("<a href='"+APP_URL+"/help/article/"+a.id+"/"+a.question+"' class='article-link article-link-panel link-reset'><div class='hover-item__content'><div class='col-middle-alt article-link-left'><i class='icon icon-light-gray icon-size-2 article-link-icon icon-description'></i></div><div class='col-middle-alt article-link-right'>"+a.value+"</div></div></a>").appendTo(e)):($("#help_search").removeClass("ui-autocomplete-loading"),$("<li style='pointer-events: none;'>").append("<span class='article-link article-link-panel link-reset'><div class='hover-item__content'><div class='col-middle-alt article-link-left'><i class='icon icon-light-gray icon-size-2 article-link-icon icon-description'></i></div><div class='col-middle-alt article-link-right'>"+a.value+"</div></div></span>").appendTo(e))}}]),app.controller("reviews_edit_host",["$scope","$http",function(e,a){$(".next-facet").click(function(){$("#double-blind-copy").addClass("hide"),$("#host-summary").removeClass("hide"),$("#guest").removeClass("hide")}),$(".review_submit").click(function(){var e=$(this).parent().parent().attr("id"),t={};$("#"+e+"-form input, #"+e+" textarea").each(function(){"radio"!=$(this).attr("type")?t[$(this).attr("name")]=$(this).val():$(this).is(":checked")&&(t[$(this).attr("name")]=$(this).val())});var o=$("#reservation_id").val();if("host-summary"==e||"guest"==e){if(""==$("#review_comments").val())return $('[for="review_comments"]').show(),$("#review_comments").addClass("invalid"),!1;if($('[for="review_comments"]').hide(),$("#review_comments").removeClass("invalid"),"host-summary"==e){if(!$('[name="rating"]').is(":checked"))return $('[for="review_rating"]').show(),!1;$('[for="review_rating"]').hide()}}t.review_id=$("#review_id").val();var n=JSON.stringify(t);$(".review-container").addClass("loading"),a.post(APP_URL+"/reviews/edit/"+o,{data:n}).then(function(a){$(".review-container").removeClass("loading"),a.data.success&&("host-details"!=e&&"guest"!=e||(window.location.href=APP_URL+"/users/reviews"),$("#review_id").val(a.data.review_id),$("#"+e).addClass("hide"),$("#"+e).next().removeClass("hide"))})})}]),$(document).on("change","#user_profile_pic",function(){$("#ajax_upload_form").submit()}),app.controller("cancel_reservation",["$scope","$http",function(e,a){$(document).ready(function(){$("[id$='-trigger']").click(function(){var e=$(this).attr("id").replace("-trigger","");if("header-avatar"!=e){$("#reserve_code").val(e),$("#reserve_id").val(e);var t={};t.id=e;var o=JSON.stringify(t);a.post(APP_URL+"/reservation/cencel_request_send",{data:o}).then(function(e){if("false"==e.data.success){var a="#cancel-modal";$(a).removeClass("hide"),$(a).addClass("show"),$(a).attr("aria-hidden","false")}else location.reload()})}}),$("[id$='-trigger-pending']").click(function(){var e=$(this).attr("id").replace("-trigger-pending","");$("#reserve_code_pending").val(e),$("#reserve_id").val(e);var a="#pending-cancel-modal";$(a).removeClass("hide"),$(a).addClass("show"),$(a).attr("aria-hidden","false")}),$('[data-behavior="modal-close"]').click(function(e){e.preventDefault(),$(".modal").removeClass("show"),$(".modal").attr("aria-hidden","true")})})}]),app.controller("edit_profile",["$scope","$http",function(e,a){e.users_phone_numbers=[],e.phone_number_val=[],e.phone_code_val=[],e.otp_val=[];var t=$("#phone_numbers_wrapper");a.post(APP_URL+"/users/get_users_phone_numbers",{}).then(function(a){e.users_phone_numbers=a.data}),e.add_phone_number=function(){t.addClass("loading"),new_phone_number={id:"",phone_number:"",phone_code:e.default_phone_code,status:"Null"},e.users_phone_numbers.push(new_phone_number),t.removeClass("loading")},e.remove_phone_number=function(e){t.addClass("loading"),t.removeClass("loading")},e.update_phone_number=function(o){t.addClass("loading"),phone_number_val=e.phone_number_val[o]?e.phone_number_val[o]:"",phone_code_val=e.phone_code_val[o],a.post(APP_URL+"/users/update_users_phone_number",{phone_number:phone_number_val,phone_code:phone_code_val}).then(function(a){"Success"==a.data.status?(e.users_phone_numbers[o].phone_number_error="",e.users_phone_numbers=a.data.users_phone_numbers,e.phone_number_val[o]=""):e.users_phone_numbers[o].phone_number_error=a.data.message,t.removeClass("loading")})},e.verify_phone_number=function(o){t.addClass("loading"),phone_number=e.users_phone_numbers[o],otp_val=e.otp_val[o]?e.otp_val[o]:"",a.post(APP_URL+"/users/verify_users_phone_number",{otp:otp_val,id:phone_number.id}).then(function(a){"Success"==a.data.status?(e.users_phone_numbers[o].otp_error="",e.users_phone_numbers=a.data.users_phone_numbers,e.otp_val[o]=""):e.users_phone_numbers[o].otp_error=a.data.message,t.removeClass("loading")})},e.remove_phone_number=function(o){t.addClass("loading"),phone_number=e.users_phone_numbers[o],a.post(APP_URL+"/users/remove_users_phone_number",{id:phone_number.id}).then(function(a){"Success"==a.data.status?(e.users_phone_numbers[o].phone_number_error="",e.users_phone_numbers=a.data.users_phone_numbers):e.users_phone_numbers[o].phone_number_error=a.data.message,t.removeClass("loading")})},$(".language-link").click(function(e){e.preventDefault(),$("body").addClass("pos-fix"),$(".mini-language").show()}),$(".login-close-language").click(function(e){$("body").removeClass("pos-fix"),$(".mini-language").hide()}),$(".top-home").click(function(e){e.stopPropagation()}),$("#language_save_button").click(function(){$("#selected_language").html(""),$(".language_select").each(function(){$(this).is(":checked")&&$("#selected_language").append('<span class="btn btn-lang space-1">'+$(this).data("name")+'  <a href="javascript:void(0)" class="text-normal" id="remove_language"> <input type="hidden" value=" '+$(this).val()+'" name="language[]"> <i class="x icon icon-remove" title="Remove from selection"></i></a> </span>'),$(".mini-language").hide(),$("body").removeClass("pos-fix")})}),$(document).on("click",'[id^="remove_language"]',function(){$(this).parent().remove()})}]),app.controller("Tabsh",["$scope",function(e){e.show=1,e.tab1=!0}]);